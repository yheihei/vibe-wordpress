# 全画面ヒーローヘッダーとスクロール連動ヘッダー表示 PRD

## 概要

ホームページのファーストビューでヒーローヘッダーを全画面表示し、スクロールに応じてナビゲーションヘッダーを動的に表示/非表示する機能を実装する。

## 目的

- ユーザーがサイトに訪れた際の第一印象を最大化する
- ゲームの世界観に没入できるようなインパクトのあるファーストビューを提供する
- スムーズなスクロール体験でコンテンツへの誘導を自然に行う

## 要求仕様

### 1. 全画面ヒーローヘッダー表示

- **要件**
  - ホームページのファーストビューでは、ヒーローヘッダーを`100vh`（ビューポート高さ100%）で表示
  - 現在のヒーローヘッダーのデザインは変更しない
  - ピクセルレインエフェクトやキャラクターアニメーションはそのまま維持

### 2. ヘッダーの動的表示制御

- **要件**
  - ホームページのファーストビュー（ヒーローヘッダー表示中）では、ナビゲーションヘッダーを非表示にする
  - ユーザーがスクロールしてヒーローヘッダーを超えたら、ヘッダーがフェードインで自然に表示される
  - ヘッダーは`position: sticky`の挙動を維持し、スクロール後は通常通り画面上部に固定される
  - ホームページ以外のページでは、従来通りヘッダーは常に表示される

### 3. スクロールインジケーター

- **要件**
  - ヒーローヘッダーの下部に、下にスクロールできることを示すアニメーションインジケーターを追加
  - レトロゲーム風のデザインに合わせたピクセルアート風の矢印または「SCROLL DOWN」のような表示
  - パルスアニメーションやバウンスアニメーションで注意を引く
  - クリック可能で、クリックすると次のセクションまでスムーズスクロール

## デザイン要件

### スクロールインジケーターのデザイン案

1. **8ビット風下向き矢印**
   - 黄色またはネオンカラーの点滅する下向き矢印
   - `▼▼▼` のような連続した矢印でアニメーション

2. **「PRESS ↓ TO CONTINUE」テキスト**
   - フォント: Press Start 2P（既存のレトロフォント）
   - 色: 黄色 (#facc15) で点滅効果
   - ブリンキングカーソル付き

3. **ピクセルアートのスクロールマウス**
   - レトロなマウスアイコンにスクロールホイールのアニメーション
   - グリーンまたはシアンのネオンカラー

### アニメーション仕様

- **ヘッダーの表示アニメーション（スキャンラインエフェクト）**
  - CRTモニター起動風のスキャンライン演出
  - 実装詳細:
    - スクロール時、画面上部から下部へ向かって緑色のスキャンラインが走る
    - スキャンラインが通過した部分からヘッダーが「起動」して表示される
    - エフェクト構成:
      1. 薄い緑色のライン（高さ2-3px）が上から下へ移動（duration: 400ms）
      2. ラインの後ろに光の残像エフェクト（グラデーション）
      3. ラインが通過した位置でヘッダーの opacity が 0→1 へ変化
      4. 微細なグリッチノイズを追加（ランダムな横線）
    - 色: #00ff00（ネオングリーン）、残像は rgba(0, 255, 0, 0.3)
    - CSSアニメーション + JavaScriptで制御

- **スクロールインジケーター**
  - bounce または pulse アニメーション
  - 3秒ごとに繰り返し
  - ホバー時は輝度アップ
  - スキャンラインエフェクトと同じ緑色で統一感を出す

## 技術実装方針

### 実装アプローチ

1. **カスタムフックの作成**
   - `useScrollVisibility` フックでスクロール位置を監視
   - ヒーローヘッダーの高さを動的に取得
   - スクロール位置に応じてヘッダーの表示/非表示を制御

2. **コンポーネントの修正**
   - `Header` コンポーネントに条件付き表示ロジックを追加
   - `HeroHeader` コンポーネントにスクロールインジケーターを追加
   - ホームページ専用のレイアウトロジックを実装
   - スキャンラインエフェクト用のコンポーネント作成
     - `ScanlineEffect` コンポーネント: アニメーション制御
     - CSS-in-JSまたはCSSモジュールでエフェクトスタイル定義

3. **パフォーマンス最適化**
   - `requestAnimationFrame` でスクロールイベントを最適化
   - `IntersectionObserver` の使用を検討
   - デバウンス処理でパフォーマンスを確保

## テスト要件

- デスクトップ・モバイル両方でのスムーズな動作確認
- スクロール位置のリロード時の挙動確認
- 他ページとホームページでのヘッダー表示の違いを確認
- アクセシビリティ: キーボードナビゲーションでの動作確認

## 成功指標

- ファーストビューでゲームの世界観に没入できる体験の提供
- スムーズで自然なヘッダーの表示切り替え
- ユーザーが迷わずコンテンツエリアへスクロールできる明確な誘導

## リスクと対策

- **リスク**: 急なヘッダー表示でユーザーが驚く可能性
  - **対策**: フェードインアニメーションで自然な表示を実現

- **リスク**: モバイルでのスクロールパフォーマンス低下
  - **対策**: 最適化されたスクロールイベント処理とGPUアクセラレーション活用

## 今後の拡張可能性

- パララックススクロール効果の追加
- ヘッダーの背景をスクロール位置に応じて変化させる
- スクロール進捗バーの追加
- 他のページでも条件に応じたヘッダー表示制御
- スキャンラインエフェクトの発展
  - ページ遷移時にも同様のCRT起動エフェクト
  - エラーページで「信号なし」風のノイズエフェクト
  - ローディング時のスキャンライン演出
- サウンドエフェクトの追加（CRT起動音、電子音）